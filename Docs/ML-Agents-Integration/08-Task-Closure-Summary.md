# 08. ML-Agents 통합 작업 종료 요약

**작업 상태:** 종료 (2025-XX-XX)

**결정 사유:** Unity ML-Agents v3.0.0 (Python `release_21`) 환경 설정의 지속적인 실패 및 과도한 리소스 소모로 인한 개발 지연 우려.

## 1. 초기 목표

*   Unity ML-Agents를 활용하여 파일럿 AI의 행동 학습 및 훈련 환경 구축.

## 2. 진행 과정 요약

*   **Unity ML-Agents v3.0.0 패키지 사용 결정.**
*   해당 버전에 맞는 Python 환경 (`release_21` 태그, Python 3.10.1~3.10.12 요구) 설정 시도.
*   **주요 난관 봉착:**
    *   **NumPy 1.21.x 빌드 실패:** Windows 환경에서 Python 3.10으로 `numpy~=1.21.2` (의존성) 빌드 시 `CCompiler_spawn()` 관련 에러 지속 발생. (직접 Wheel 파일 설치 시도했으나 1.21.2 버전의 cp310-win_amd64 공식 빌드 부재, 1.21.6 버전으로 대체 설치 성공)
    *   **`pettingzoo==1.15.0` 설치 실패:** `mlagents_envs` (v1.0.0)의 의존성인 `pettingzoo==1.15.0`이 Python 3.10 환경에서 정상적으로 찾아지거나 설치되지 않는 문제 발생. (`pip` 업그레이드, 캐시 삭제, `--no-binary` 옵션 등 시도했으나 실패)
*   **대안 모색 및 시도:**
    *   Unity ML-Agents v2.0.1 + Python `mlagents==0.28.0` (Python 3.8) 환경으로 다운그레이드 고려 및 복기 (과거 NumPy 직접 패치 등 불안정성 확인). 실제 다운그레이드 시도 시 Unity 에디터 실행 불가 문제 발생.
    *   Ray RLlib 등 다른 RL 프레임워크 연동 가능성 검토.
    *   관련 GitHub 이슈 확인 (#6053, #6199) - Python 버전 호환성 및 CUDA 관련 잠재적 런타임 오류 등 ML-Agents 최신 버전의 불안정성 간접 확인.

## 3. 최종 결정 및 후속 조치

*   ML-Agents 통합 작업을 **전면 폐기**하기로 결정.
*   관련 Python 가상 환경 폴더 (`.venv-mlagents-py310`) 삭제 완료.
*   Anaconda `mlagents` 환경 사용자 직접 제거 예정.
*   관련 C# 코드 및 설정 파일은 `feat/ai/ml-agents-pilot` 브랜치에 기록으로 남겨둠 (브랜치 처리는 추후 결정).

## 4. 교훈

*   Unity ML-Agents 최신 버전(v3.0.0 / `release_21`)은 특정 Python 버전 및 복잡한 의존성 요구사항으로 인해 Windows 환경 설정이 매우 불안정하고 어려움.
*   외부 라이브러리 통합 시, 버전 호환성 확인 및 환경 설정에 충분한 시간과 검증이 필요함. 문제 발생 시 과감한 대안 모색 또는 중단 결정이 필요할 수 있음.

정말 험난한 과정이었지만, 덕분에 많은 것을 배우고 경험할 수 있었어. 이 경험이 다음 도전에 밑거름이 되기를! 💪 