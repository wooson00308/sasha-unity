# 인수인계 문서 2: 핵심 인프라스트럭처

이 문서는 AF 프로젝트의 핵심 인프라스트럭처를 구성하는 서비스 로케이터 및 이벤트 버스 시스템 관련 클래스와 인터페이스를 요약합니다.

## 1. IService.cs (인터페이스)

- **경로**: `Assets/AF/Scripts/Services/IService.cs`
- **역할**: 서비스 로케이터 패턴에서 관리되는 모든 서비스가 구현해야 하는 기본 인터페이스입니다.
- **주요 내용**:
    - `Initialize()`: 서비스가 등록될 때 호출되어 초기화 로직을 수행합니다.
    - `Shutdown()`: 서비스가 제거될 때 호출되어 종료 및 리소스 정리 로직을 수행합니다.
- **목적**: 서비스의 생명주기를 표준화하고, 서비스 로케이터가 일관된 방식으로 서비스를 관리할 수 있도록 합니다.

## 2. ServiceLocator.cs

- **경로**: `Assets/AF/Scripts/Services/ServiceLocator.cs`
- **역할**: 싱글톤 패턴을 기반으로 구현된 서비스 로케이터 클래스입니다. 프로젝트 전역에서 다양한 서비스에 대한 중앙 접근점을 제공합니다.
- **주요 기능**:
    - `Instance` (static property): 싱글톤 인스턴스에 접근합니다.
    - `RegisterService<T>(T service)`: `IService`를 구현한 서비스 인스턴스를 등록하고 `Initialize()`를 호출합니다. 이미 등록된 타입이면 기존 서비스를 `Shutdown()`하고 대체합니다.
    - `GetService<T>()`: 등록된 서비스 인스턴스를 타입으로 조회하여 반환합니다. 등록되지 않은 경우 예외를 발생시킵니다.
    - `HasService<T>()`: 특정 타입의 서비스가 등록되어 있는지 확인합니다.
    - `RemoveService<T>()`: 특정 타입의 서비스를 `Shutdown()`하고 등록 해제합니다.
    - `ClearAllServices()`: 등록된 모든 서비스를 `Shutdown()`하고 제거합니다.
- **특징**: 서비스의 등록, 조회, 제거 및 생명주기 관리를 중앙에서 처리하여 의존성 관리를 용이하게 합니다.

## 3. IEvent.cs (인터페이스)

- **경로**: `Assets/AF/Scripts/EventBus/IEvent.cs`
- **역할**: 이벤트 버스 시스템에서 사용되는 모든 이벤트 클래스가 구현해야 하는 마커 인터페이스입니다.
- **주요 내용**: 현재는 멤버가 정의되어 있지 않습니다.
- **목적**: 이벤트 버스가 처리할 수 있는 이벤트 타입을 식별하는 기본 타입 역할을 합니다. 향후 모든 이벤트가 공유해야 하는 공통 속성이나 메서드가 필요할 경우 이 인터페이스에 추가될 수 있습니다.

## 4. EventBus.cs

- **경로**: `Assets/AF/Scripts/EventBus/EventBus.cs`
- **역할**: 발행-구독(Publish-Subscribe) 패턴을 기반으로 구현된 이벤트 버스 시스템의 핵심 클래스입니다. 시스템 컴포넌트 간의 결합도를 낮추고 유연한 통신을 가능하게 합니다.
- **주요 기능**:
    - `Subscribe<T>(Action<T> listener)`: 특정 `IEvent` 타입에 대한 리스너(콜백 메서드)를 등록합니다.
    - `Unsubscribe<T>(Action<T> listener)`: 등록된 리스너를 제거합니다.
    - `Publish<T>(T eventData)`: 특정 `IEvent` 타입의 이벤트를 발행하여 해당 타입에 등록된 모든 리스너에게 전달합니다. 리스너 호출 시 예외 처리를 포함합니다.
    - `Clear()`: 모든 이벤트 리스너 등록을 제거합니다.
    - `SetLogging(bool enable)`: 이벤트 구독/발행 관련 내부 로그 출력 여부를 제어합니다.
    - `GetRegisteredEvents()`: 현재 등록된 이벤트 타입과 각 타입별 리스너 수를 조회합니다.
- **특징**: `Dictionary<Type, List<Delegate>>`를 사용하여 이벤트 타입별 리스너 목록을 관리합니다. 비동기 처리는 포함하지 않으며, 발행된 순서대로 동기적으로 리스너를 호출합니다.

---

*이 문서는 각 클래스 및 인터페이스의 핵심적인 역할과 기능을 요약한 것으로, 상세한 구현은 해당 스크립트 코드를 직접 참조해야 합니다.* 